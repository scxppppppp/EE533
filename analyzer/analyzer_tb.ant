////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 1995-2003 Xilinx, Inc.
// All Right Reserved.
////////////////////////////////////////////////////////////////////////////////
//   ____  ____ 
//  /   /\/   / 
// /___/  \  /    Vendor: Xilinx 
// \   \   \/     Version : 10.1.03
//  \   \         Application : ISE
//  /   /         Filename : analyzer_tb.ant
// /___/   /\     Timestamp : Thu Mar  3 00:52:09 2022
// \   \  /  \ 
//  \___\/\___\ 
//
//Command: 
//Design Name: analyzer_tb
//Device: Xilinx
//
`timescale 1ns/1ps

module analyzer_tb;
    reg [63:0] din0 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg [63:0] din1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg [63:0] din2 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg [63:0] din3 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg [63:0] din4 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg [63:0] din5 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg [63:0] din6 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg [63:0] din7 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg [63:0] din8 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg [63:0] din9 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg [63:0] din10 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg [63:0] din11 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg [63:0] din12 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg [63:0] din13 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg [63:0] din14 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg [63:0] din15 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg trigger = 1'b0;
    reg reg_req_in = 1'b0;
    reg reg_ack_in = 1'b0;
    reg reg_rd_wr_L_in = 1'b0;
    reg [15:0] reg_addr_in = 16'b0000000000000000;
    reg [15:0] reg_data_in = 16'b0000000000000000;
    reg [1:0] reg_src_in = 2'b00;
    wire reg_req_out;
    wire reg_ack_out;
    wire reg_rd_wr_L_out;
    wire [15:0] reg_addr_out;
    wire [15:0] reg_data_out;
    wire [1:0] reg_src_out;
    reg clk = 1'b0;
    reg rst = 1'b0;

    parameter PERIOD = 200;
    parameter real DUTY_CYCLE = 0.5;
    parameter OFFSET = 100;

    initial    // Clock process for clk
    begin
        #OFFSET;
        forever
        begin
            clk = 1'b0;
            #(PERIOD-(PERIOD*DUTY_CYCLE)) clk = 1'b1;
            #(PERIOD*DUTY_CYCLE);
        end
    end

    analyzer16x64x64 UUT (
        .din0(din0),
        .din1(din1),
        .din2(din2),
        .din3(din3),
        .din4(din4),
        .din5(din5),
        .din6(din6),
        .din7(din7),
        .din8(din8),
        .din9(din9),
        .din10(din10),
        .din11(din11),
        .din12(din12),
        .din13(din13),
        .din14(din14),
        .din15(din15),
        .trigger(trigger),
        .reg_req_in(reg_req_in),
        .reg_ack_in(reg_ack_in),
        .reg_rd_wr_L_in(reg_rd_wr_L_in),
        .reg_addr_in(reg_addr_in),
        .reg_data_in(reg_data_in),
        .reg_src_in(reg_src_in),
        .reg_req_out(reg_req_out),
        .reg_ack_out(reg_ack_out),
        .reg_rd_wr_L_out(reg_rd_wr_L_out),
        .reg_addr_out(reg_addr_out),
        .reg_data_out(reg_data_out),
        .reg_src_out(reg_src_out),
        .clk(clk),
        .rst(rst));

    integer TX_FILE = 0;
    integer TX_ERROR = 0;
    
    initial begin    // Annotation process for clock clk
        #0;
        ANNOTATE_reg_req_out;
        ANNOTATE_reg_ack_out;
        ANNOTATE_reg_rd_wr_L_out;
        ANNOTATE_reg_addr_out;
        ANNOTATE_reg_data_out;
        ANNOTATE_reg_src_out;
        #OFFSET;
        forever begin
            #115;
            ANNOTATE_reg_req_out;
            ANNOTATE_reg_ack_out;
            ANNOTATE_reg_rd_wr_L_out;
            ANNOTATE_reg_addr_out;
            ANNOTATE_reg_data_out;
            ANNOTATE_reg_src_out;
            #85;
        end
    end

    initial begin  // Open the annotations file...
        TX_FILE = $fopen("/home/ise/sf/ee533_cpu/analyzer/analyzer_tb.ano");
        #7200 // Final time:  7200 ns
        $display("Success! Annotation Simulation Complete.");
        $fdisplay(TX_FILE, "Total[%d]", TX_ERROR);
        $fclose(TX_FILE);
        $finish;
    end

    initial begin
        // -------------  Current Time:  100ns
        #100;
        rst = 1'b1;
        // -------------------------------------
        // -------------  Current Time:  185ns
        #85;
        din10 = 64'b0000000000000000000000000000000000000000000000000000000000010000;
        din11 = 64'b0000000000000000000000000000000000000000000000000000000000010001;
        din12 = 64'b0000000000000000000000000000000000000000000000000000000000010010;
        din13 = 64'b0000000000000000000000000000000000000000000000000000000000010011;
        din14 = 64'b0000000000000000000000000000000000000000000000000000000000010100;
        din15 = 64'b0000000000000000000000000000000000000000000000000000000000010101;
        din4 = 64'b0000000000000000000000000000000000000000000000000000000000000100;
        din5 = 64'b0000000000000000000000000000000000000000000000000000000000000101;
        din6 = 64'b0000000000000000000000000000000000000000000000000000000000000110;
        din7 = 64'b0000000000000000000000000000000000000000000000000000000000000111;
        din8 = 64'b0000000000000000000000000000000000000000000000000000000000001000;
        din9 = 64'b0000000000000000000000000000000000000000000000000000000000001001;
        // -------------------------------------
        // -------------  Current Time:  385ns
        #200;
        rst = 1'b0;
        trigger = 1'b1;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000000001;
        din1 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        din2 = 64'b0000000000000000000000000000000000000000000000000000000000000001;
        din3 = 64'b1000000000000000000000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  585ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000000010;
        din1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
        din2 = 64'b0000000000000000000000000000000000000000000000000000000000000011;
        din3 = 64'b1100000000000000000000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  785ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000000011;
        din1 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        din2 = 64'b0000000000000000000000000000000000000000000000000000000000000111;
        din3 = 64'b1110000000000000000000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  985ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000000100;
        din1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
        din2 = 64'b0000000000000000000000000000000000000000000000000000000000001111;
        din3 = 64'b1111000000000000000000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  1185ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000000101;
        din1 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        din2 = 64'b0000000000000000000000000000000000000000000000000000000000011111;
        din3 = 64'b1111100000000000000000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  1385ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000000110;
        din1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
        din2 = 64'b0000000000000000000000000000000000000000000000000000000000111111;
        din3 = 64'b1111110000000000000000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  1585ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000000111;
        din1 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        din2 = 64'b0000000000000000000000000000000000000000000000000000000001111111;
        din3 = 64'b1111111000000000000000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  1785ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000001000;
        din1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
        din2 = 64'b0000000000000000000000000000000000000000000000000000000011111111;
        din3 = 64'b1111111100000000000000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  1985ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000001001;
        din1 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        din2 = 64'b0000000000000000000000000000000000000000000000000000000111111111;
        din3 = 64'b1111111110000000000000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  2185ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000001010;
        din1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
        din2 = 64'b0000000000000000000000000000000000000000000000000000001111111111;
        din3 = 64'b1111111111000000000000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  2385ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000001011;
        din1 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        din2 = 64'b0000000000000000000000000000000000000000000000000000011111111111;
        din3 = 64'b1111111111100000000000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  2585ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000001100;
        din1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
        din2 = 64'b0000000000000000000000000000000000000000000000000000111111111111;
        din3 = 64'b1111111111110000000000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  2785ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000001101;
        din1 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        din2 = 64'b0000000000000000000000000000000000000000000000000001111111111111;
        din3 = 64'b1111111111111000000000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  2985ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000001110;
        din1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
        din2 = 64'b0000000000000000000000000000000000000000000000000011111111111111;
        din3 = 64'b1111111111111100000000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  3185ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000001111;
        din1 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        din2 = 64'b0000000000000000000000000000000000000000000000000111111111111111;
        din3 = 64'b1111111111111110000000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  3385ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000010000;
        din1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
        din2 = 64'b0000000000000000000000000000000000000000000000001111111111111111;
        din3 = 64'b1111111111111111000000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  3585ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000010001;
        din1 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        din2 = 64'b0000000000000000000000000000000000000000000000011111111111111111;
        din3 = 64'b1111111111111111100000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  3785ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000010010;
        din1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
        din2 = 64'b0000000000000000000000000000000000000000000000111111111111111111;
        din3 = 64'b1111111111111111110000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  3985ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000010011;
        din1 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        din2 = 64'b0000000000000000000000000000000000000000000001111111111111111111;
        din3 = 64'b1111111111111111111000000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  4185ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000010100;
        din1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
        din2 = 64'b0000000000000000000000000000000000000000000011111111111111111111;
        din3 = 64'b1111111111111111111100000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  4385ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000010101;
        din1 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        din2 = 64'b0000000000000000000000000000000000000000000111111111111111111111;
        din3 = 64'b1111111111111111111110000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  4585ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000010110;
        din1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
        din2 = 64'b0000000000000000000000000000000000000000001111111111111111111111;
        din3 = 64'b1111111111111111111111000000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  4785ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000010111;
        din1 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        din2 = 64'b0000000000000000000000000000000000000000011111111111111111111111;
        din3 = 64'b1111111111111111111111100000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  4985ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000011000;
        din1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
        din2 = 64'b0000000000000000000000000000000000000000111111111111111111111111;
        din3 = 64'b1111111111111111111111110000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  5185ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000011001;
        din1 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        din2 = 64'b0000000000000000000000000000000000000001111111111111111111111111;
        din3 = 64'b1111111111111111111111111000000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  5385ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000011010;
        din1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
        din2 = 64'b0000000000000000000000000000000000000011111111111111111111111111;
        din3 = 64'b1111111111111111111111111100000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  5585ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000011011;
        din1 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        din2 = 64'b0000000000000000000000000000000000000111111111111111111111111111;
        din3 = 64'b1111111111111111111111111110000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  5785ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000011100;
        din1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
        din2 = 64'b0000000000000000000000000000000000001111111111111111111111111111;
        din3 = 64'b1111111111111111111111111111000000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  5985ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000011101;
        din1 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        din2 = 64'b0000000000000000000000000000000000011111111111111111111111111111;
        din3 = 64'b1111111111111111111111111111100000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  6185ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000011110;
        din1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
        din2 = 64'b0000000000000000000000000000000000111111111111111111111111111111;
        din3 = 64'b1111111111111111111111111111110000000000000000000000000000000000;
        // -------------------------------------
        // -------------  Current Time:  6385ns
        #200;
        din0 = 64'b0000000000000000000000000000000000000000000000000000000000011111;
        din1 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        din2 = 64'b0000000000000000000000000000000001111111111111111111111111111111;
        din3 = 64'b1111111111111111111111111111111000000000000000000000000000000000;
        // -------------------------------------
    end

    task ANNOTATE_reg_req_out;
        #0 begin
            $fdisplay(TX_FILE, "Annotate[%d,reg_req_out,%b]", $time, reg_req_out);
            $fflush(TX_FILE);
            TX_ERROR = TX_ERROR + 1;
        end
    endtask

    task ANNOTATE_reg_ack_out;
        #0 begin
            $fdisplay(TX_FILE, "Annotate[%d,reg_ack_out,%b]", $time, reg_ack_out);
            $fflush(TX_FILE);
            TX_ERROR = TX_ERROR + 1;
        end
    endtask

    task ANNOTATE_reg_rd_wr_L_out;
        #0 begin
            $fdisplay(TX_FILE, "Annotate[%d,reg_rd_wr_L_out,%b]", $time, reg_rd_wr_L_out);
            $fflush(TX_FILE);
            TX_ERROR = TX_ERROR + 1;
        end
    endtask

    task ANNOTATE_reg_addr_out;
        #0 begin
            $fdisplay(TX_FILE, "Annotate[%d,reg_addr_out,%b]", $time, reg_addr_out);
            $fflush(TX_FILE);
            TX_ERROR = TX_ERROR + 1;
        end
    endtask

    task ANNOTATE_reg_data_out;
        #0 begin
            $fdisplay(TX_FILE, "Annotate[%d,reg_data_out,%b]", $time, reg_data_out);
            $fflush(TX_FILE);
            TX_ERROR = TX_ERROR + 1;
        end
    endtask

    task ANNOTATE_reg_src_out;
        #0 begin
            $fdisplay(TX_FILE, "Annotate[%d,reg_src_out,%b]", $time, reg_src_out);
            $fflush(TX_FILE);
            TX_ERROR = TX_ERROR + 1;
        end
    endtask

endmodule

