////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 1995-2003 Xilinx, Inc.
// All Right Reserved.
////////////////////////////////////////////////////////////////////////////////
//   ____  ____ 
//  /   /\/   / 
// /___/  \  /    Vendor: Xilinx 
// \   \   \/     Version : 10.1.03
//  \   \         Application : ISE
//  /   /         Filename : alu64_sync_tb2.ant
// /___/   /\     Timestamp : Wed Mar  2 06:35:33 2022
// \   \  /  \ 
//  \___\/\___\ 
//
//Command: 
//Design Name: alu64_sync_tb2
//Device: Xilinx
//
`timescale 1ns/1ps

module alu64_sync_tb2;
    reg C = 1'b0;
    reg CE = 1'b0;
    reg MD = 1'b0;
    reg [2:0] OP = 3'b000;
    reg R = 1'b0;
    reg [63:0] R1 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    reg [63:0] R2 = 64'b0000000000000000000000000000000000000000000000000000000000000000;
    wire EQ;
    wire GT;
    wire LT;
    wire OVR;
    wire [63:0] Q;

    parameter PERIOD = 200;
    parameter real DUTY_CYCLE = 0.5;
    parameter OFFSET = 100;

    initial    // Clock process for C
    begin
        #OFFSET;
        forever
        begin
            C = 1'b0;
            #(PERIOD-(PERIOD*DUTY_CYCLE)) C = 1'b1;
            #(PERIOD*DUTY_CYCLE);
        end
    end

    alu64_sync UUT (
        .C(C),
        .CE(CE),
        .MD(MD),
        .OP(OP),
        .R(R),
        .R1(R1),
        .R2(R2),
        .EQ(EQ),
        .GT(GT),
        .LT(LT),
        .OVR(OVR),
        .Q(Q));

    integer TX_FILE = 0;
    integer TX_ERROR = 0;
    
    initial begin    // Annotation process for clock C
        #0;
        ANNOTATE_EQ;
        ANNOTATE_GT;
        ANNOTATE_LT;
        ANNOTATE_OVR;
        ANNOTATE_Q;
        #OFFSET;
        forever begin
            #115;
            ANNOTATE_EQ;
            ANNOTATE_GT;
            ANNOTATE_LT;
            ANNOTATE_OVR;
            ANNOTATE_Q;
            #85;
        end
    end

    initial begin  // Open the annotations file...
        TX_FILE = $fopen("/home/ise/sf/ee533_cpu/alu/alu64_sync_tb2.ano");
        #3700 // Final time:  3700 ns
        $display("Success! Annotation Simulation Complete.");
        $fdisplay(TX_FILE, "Total[%d]", TX_ERROR);
        $fclose(TX_FILE);
        $finish;
    end

    initial begin
        // -------------  Current Time:  100ns
        #100;
        CE = 1'b1;
        R = 1'b1;
        // -------------------------------------
        // -------------  Current Time:  185ns
        #85;
        R = 1'b0;
        R1 = 64'b0000000000000000000000000000000000000000000000000000000001000111;
        R2 = 64'b0000000000000000000000000000000000000000000000000000000000110011;
        // -------------------------------------
        // -------------  Current Time:  385ns
        #200;
        MD = 1'b1;
        R1 = 64'b0000000000000000000000000000000000000000000000000000000000110101;
        R2 = 64'b0000000000000000000000000000000000000000000000000000000000111001;
        // -------------------------------------
        // -------------  Current Time:  585ns
        #200;
        MD = 1'b0;
        OP = 3'b111;
        R1 = 64'b0000000000000000000000000000000000000000000000000000000001001000;
        R2 = 64'b0000000000000000000000000000000000000000000000000000000001000100;
        // -------------------------------------
        // -------------  Current Time:  785ns
        #200;
        OP = 3'b110;
        R1 = 64'b0000000000000000000000000000000000000000000000000000000001001100;
        R2 = 64'b0000000000000000000000000000000000000000000000000000000001000101;
        // -------------------------------------
        // -------------  Current Time:  985ns
        #200;
        OP = 3'b100;
        R1 = 64'b0000000000000000000000000000000000000000000000000000000000101100;
        R2 = 64'b0000000000000000000000000000000000000000000000000000000000101110;
        // -------------------------------------
        // -------------  Current Time:  1185ns
        #200;
        OP = 3'b010;
        R1 = 64'b0000000000000000000000000000000000000000000000000000000000100110;
        R2 = 64'b0000000000000000000000000000000000000000000000000000000000000111;
        // -------------------------------------
        // -------------  Current Time:  1385ns
        #200;
        OP = 3'b011;
        R1 = 64'b0000000000000000000000000000000000000000000000000000000000100100;
        R2 = 64'b0000000000000000000000000000000000000000000000000000000001100100;
        // -------------------------------------
        // -------------  Current Time:  1585ns
        #200;
        R1 = 64'b0000000000000000000000000000000000000000000000000000000000110011;
        R2 = 64'b0000000000000000000000000000000000000000000000000000000000110011;
        // -------------------------------------
        // -------------  Current Time:  1785ns
        #200;
        OP = 3'b001;
        R1 = 64'b0000000000000000000000000000000000000000000000000000000000110110;
        R2 = 64'b0000000000000000000000000000000000000000000000000000000000000100;
        // -------------------------------------
        // -------------  Current Time:  1985ns
        #200;
        OP = 3'b101;
        R1 = 64'b0000000000000000000000000000000000000000000000000000000001000010;
        R2 = 64'b0000000000000000000000000000000000000000000000000000000000000011;
        // -------------------------------------
        // -------------  Current Time:  2185ns
        #200;
        MD = 1'b1;
        R1 = 64'b0000000000000000000000000000000000000000000000000000000001010101;
        R2 = 64'b0000000000000000000000000000000000000000000000000000000000000101;
        // -------------------------------------
        // -------------  Current Time:  2385ns
        #200;
        R1 = 64'b1111111111111111111111111111111111111111111111111111111110101011;
        // -------------------------------------
        // -------------  Current Time:  2585ns
        #200;
        MD = 1'b0;
        OP = 3'b010;
        R1 = 64'b0000000000000000000000000000000000000000000000000000000000000001;
        R2 = 64'b1111111111111111111111111111111111111111111111111111111111111111;
        // -------------------------------------
        // -------------  Current Time:  2785ns
        #200;
        MD = 1'b1;
        // -------------------------------------
        // -------------  Current Time:  2985ns
        #200;
        MD = 1'b0;
        OP = 3'b011;
        // -------------------------------------
        // -------------  Current Time:  3185ns
        #200;
        MD = 1'b1;
        // -------------------------------------
        // -------------  Current Time:  3385ns
        #200;
        MD = 1'b0;
        // -------------------------------------
    end

    task ANNOTATE_EQ;
        #0 begin
            $fdisplay(TX_FILE, "Annotate[%d,EQ,%b]", $time, EQ);
            $fflush(TX_FILE);
            TX_ERROR = TX_ERROR + 1;
        end
    endtask

    task ANNOTATE_GT;
        #0 begin
            $fdisplay(TX_FILE, "Annotate[%d,GT,%b]", $time, GT);
            $fflush(TX_FILE);
            TX_ERROR = TX_ERROR + 1;
        end
    endtask

    task ANNOTATE_LT;
        #0 begin
            $fdisplay(TX_FILE, "Annotate[%d,LT,%b]", $time, LT);
            $fflush(TX_FILE);
            TX_ERROR = TX_ERROR + 1;
        end
    endtask

    task ANNOTATE_OVR;
        #0 begin
            $fdisplay(TX_FILE, "Annotate[%d,OVR,%b]", $time, OVR);
            $fflush(TX_FILE);
            TX_ERROR = TX_ERROR + 1;
        end
    endtask

    task ANNOTATE_Q;
        #0 begin
            $fdisplay(TX_FILE, "Annotate[%d,Q,%b]", $time, Q);
            $fflush(TX_FILE);
            TX_ERROR = TX_ERROR + 1;
        end
    endtask

endmodule

